<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Adventure with Chipper!</title>
    <link rel="stylesheet" href="../styles.css" />
</head>
<body>

    <div id="shared-header"></div>

    <div class="bodytext-section container">
        <h1 class="section-header">Chipper</h1>
        <h2>Site is currently getting an overhaul</h2>
    </div>

    <section class="container bodytext-section">
        <h1>This is going to be the page for Chipper</h1>
    </section>

			<div id="shared-footer"></div>

		<script>
		document.addEventListener("DOMContentLoaded", function () {
		  // Load header
		  fetch("../shared/header.html")
			.then(r => r.text())
			.then(html => {
			  document.getElementById("shared-header").innerHTML = html;

			  // NOW run the user section script AFTER header is inserted
			  const userSection = document.getElementById("userSection");
			  const loggedIn = localStorage.getItem("loggedIn") === "true";
			  const userId = localStorage.getItem("currentUserId");

			  if (loggedIn && userId) {
				const userData = JSON.parse(localStorage.getItem(`user_${userId}`));
				if (userData?.username) {
				  userSection.innerHTML = `
					<span class="username">${userData.username}</span>
					<a href="/users/${userId}/profile.html" class="user-avatar">
					  <img src="/users/default/pfp.jpg" alt="${userData.username}'s avatar">
					</a>
				  `;
				  return;
				}
			  }
			  // Not logged in
			  userSection.innerHTML = `<a href="/login.html" style="color:#007bff;font-weight:bold;text-decoration:none;">Create an account today!</a>`;
			});

		  // Load footer
		  fetch("../shared/footer.html")
			.then(r => r.text())
			.then(d => document.getElementById("shared-footer").innerHTML = d);
		});
		</script>
	</body>
</html>
